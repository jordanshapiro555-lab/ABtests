(function () {
  var overlaySel = '[data-minicart-component="overlay"]';
  var headerSel = '.utility-overlay__header';
  var titleRowSel = '.utility-overlay__header .flex';
  var bannerId = 'bb-complimentary-ship-banner';

  function makeBanner() {
    var banner = document.createElement('div');
    banner.id = bannerId;

    // Container styling (no gradients)
    banner.style.background = '#F5F6F7';     // soft light gray
    banner.style.border = '1px solid #C6A24A'; // thin gold border
    banner.style.padding = '12px 14px';
    banner.style.margin = '10px 0 0 0';
    banner.style.display = 'flex';
    banner.style.gap = '10px';
    banner.style.alignItems = 'flex-start';

    // Navy circle icon
    var icon = document.createElement('span');
    icon.setAttribute('aria-hidden', 'true');
    icon.style.width = '18px';
    icon.style.height = '18px';
    icon.style.borderRadius = '999px';
    icon.style.background = '#1B2A41'; // navy
    icon.style.display = 'inline-flex';
    icon.style.alignItems = 'center';
    icon.style.justifyContent = 'center';
    icon.style.marginTop = '2px';
    icon.innerHTML =
      '<svg viewBox="0 0 16 16" width="12" height="12" xmlns="http://www.w3.org/2000/svg">' +
      '<path fill="#fff" d="M6.35 11.2 3.2 8.05l1.06-1.06 2.09 2.09 5.41-5.41 1.06 1.06z"/>' +
      '</svg>';

    // Text block
    var txt = document.createElement('div');

    var headline = document.createElement('div');
    headline.textContent = "You’ve Earned Complimentary Shipping.";
    headline.style.color = '#1B2A41';
    headline.style.fontWeight = '700';
    headline.style.lineHeight = '1.2';
    // “serif feel” without loading fonts:
    headline.style.fontFamily =
      'Georgia, "Times New Roman", Times, serif';

    var sub = document.createElement('div');
    sub.textContent = "Standard shipping has been applied to your order.";
    sub.style.marginTop = '2px';
    sub.style.color = '#4B5563'; // gray
    sub.style.fontSize = '0.875em';
    sub.style.lineHeight = '1.25';

    txt.appendChild(headline);
    txt.appendChild(sub);

    banner.appendChild(icon);
    banner.appendChild(txt);

    return banner;
  }

  function apply() {
    var overlay = document.querySelector(overlaySel);
    if (!overlay) return;

    var header = overlay.querySelector(headerSel);
    if (!header) return;

    // If already present, do nothing
    if (header.querySelector('#' + bannerId)) return;

    // Place directly under the header title row
    var titleRow = overlay.querySelector(titleRowSel);
    var banner = makeBanner();

    if (titleRow && titleRow.parentNode === header) {
      // Insert after title row (keeps existing close button row intact)
      if (titleRow.nextSibling) {
        header.insertBefore(banner, titleRow.nextSibling);
      } else {
        header.appendChild(banner);
      }
    } else {
      // Fallback: prepend inside header
      header.insertBefore(banner, header.firstChild);
    }
  }

  // Run once now
  apply();

  // Re-apply on re-render
  var obs = new MutationObserver(function () {
    apply();
  });
  obs.observe(document.body, { childList: true, subtree: true });
})();
